<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "com.hgb.gssbe.org.dao.OrgDao">

    <select id="selectOrgList" parameterType="com.hgb.gssbe.org.model.OrgReq"
            resultType="com.hgb.gssbe.org.model.OrgRes">
        SELECT
            ORG_ID
             , ORG_NAME
             , ORG_ADDRESS
             , ORG_NUMBER
             , ORG_PAX_NUMBER
        FROM
            gss.TB_ORGANIZATION
        WHERE
            1 = 1
            <if test='keyWord !=null and keyWord != ""'>
            AND
            (
                ORG_NAME LIKE CONCAT('%', #{keyWord}, '%')
                OR
                ORG_NUMBER LIKE CONCAT('%', #{keyWord}, '%')
                OR
                ORG_PAX_NUMBER LIKE CONCAT('%', #{keyWord}, '%')
            )
            </if>
    </select>

    <select id="selectOrgCount" parameterType="com.hgb.gssbe.org.model.OrgReq"
            resultType="java.lang.Integer">
        SELECT
            COUNT(ORG_ID)
        FROM
            gss.TB_ORGANIZATION
        WHERE
        1 = 1
        <if test='keyWord !=null and keyWord != ""'>
        AND
        (
            ORG_NAME LIKE CONCAT('%', #{keyWord}, '%')
            OR
            ORG_NUMBER LIKE CONCAT('%', #{keyWord}, '%')
            OR
            ORG_PAX_NUMBER LIKE CONCAT('%', #{keyWord}, '%')
        )
        </if>
    </select>

    <select id ="selectOrgCountByName" parameterType="java.lang.String" resultType="java.lang.Integer">
        SELECT
            COUNT(1)
        FROM
            gss.TB_ORGANIZATION
        WHERE
            ORG_NAME = #{orgName}
    </select>
    
    <insert id="createOrg" parameterType="com.hgb.gssbe.org.model.Org">
        INSERT INTO gss.TB_ORGANIZATION
            (
                ORG_NAME
                , ORG_ADDRESS
                , ORG_NUMBER
                , ORG_PAX_NUMBER
                , CREATE_DATE
                , CREATE_USER_ID
                , UPDATE_DATE
                , UPDATE_USER_ID
            )
        VALUES
            (
                #{orgName}
            , #{orgAddress}
            , #{orgNumber}
            , #{orgPaxNumber}
            , NOW()
            , #{userId}
            , NOW()
            , #{userId}
            )
    </insert>
</mapper>